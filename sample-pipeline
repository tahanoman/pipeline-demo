trigger:
- main  # Trigger on changes to the main branch

pool:
  name: Default  # Use your self-hosted agent pool
  demands:
    - agent.name -equals TAHANOMAN

steps:
- script: |
    rm -rf $(Pipeline.Workspace)/cache-folder
    mkdir -p $(Pipeline.Workspace)/cache-folder
    echo "Cached data" > $(Pipeline.Workspace)/cache-folder/sample.txt
    cat $(Pipeline.Workspace)/cache-folder/sample.txt
  displayName: 'Create and Read Cached Data'

- task: Cache@2
  inputs:
    key: 'simple-cache | $(Pipeline.Workspace)/cache-folder/sample.txt'
    path: $(Pipeline.Workspace)/cache-folder
    restoreKeys: 'simple-cache'
  displayName: 'Cache Sample Files'
