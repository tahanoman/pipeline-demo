# Example pipeline for building and testing a Node.js project using a self-hosted agent
trigger:
- main

pool:
  name: Default
  demands:
    - agent.name -equals TAHANOMAN

steps:
- script: |
    echo "Initializing the build environment..."
    node -v
    npm -v
    echo "Environment verified successfully."
  displayName: "Verify Environment"

- script: |
    echo "Installing project dependencies..."
    npm ci
  displayName: "Install Dependencies"

- script: |
    echo "Running tests..."
    npm test
  displayName: "Run Tests"

- script: |
    echo "Building the project..."
    npm run build
    echo "Build completed successfully."
  displayName: "Build Project"

- script: |
    echo "Cleaning up..."
    npm cache clean --force
    echo "Cleanup completed successfully."
  displayName: "Cleanup"
